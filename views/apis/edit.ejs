<!DOCTYPE html>
<html>
    <head>
        <%- include ../partials/head %>
    </head>
    <body>
      <%- include ../partials/header %>
    <div class="container">
      <h1>Add a new API</h1>
      <form action="/<%= api._id %>" method="POST">

        <div class="form-group">
          <label>Name:</label>
          <input type="text" name='name' value="<%- api.name %>" placeholder="Name" class="form-control">
        </div>

        <div class="form-group">
          <label>URL:</label>
          <input type="url" name='url' value="<%- api.url %>" id="api-url" placeholder="URL" class="form-control">
        </div>

        <div class="form-group">
          <label>About:</label>
          <input type="text" name='about' value="<%- api.about %>" id="api-about" placeholder="About" class="form-control">
        </div>

        <div class="form-group">
          <label>Support provided:</label>
          <% if (api.support) { %>
          <input type="checkbox" checked name='support' id="api-support" class="form-control">
          <% } else { %>
          <input type="checkbox" name='support' id="api-support" class="form-control">
          <% } %>
        </div>

        <div class="form-group">
          <label>Free:</label>
          <% if (api.free) { %>
          <input type="checkbox" checked name="free" id="api-free" class="form-control">
          <% } else { %>
          <input type="checkbox" name="free" id="api-free" class="form-control">
          <% } %>
        </div>

        <div class="form-group">
          <label>Authenication offered:</label>
          <% if (api.authentication) { %>
          <input type="checkbox" checked name='authentication' id="api-authentication" class="form-control">
          <% } else { %>
          <input type="checkbox" name='authentication' id="api-authentication" class="form-control">
          <% } %>
        </div>

        <div class="form-group">
          <label>Deprecated:</label>
          <% if (api.deprecated) { %>
          <input type="checkbox" checked name='deprecated' id="api-deprecated" class="form-control">
          <% } else { %>
          <input type="checkbox" name='deprecated' id="api-deprecated" class="form-control">
          <% } %>
        </div>
        <div class="form-group">
          <label>Number of tools offered:</label>
          <input type="number" name='tools' value="<%- api.tools %>" id="api-tools" placeholder="Number of tools" class="form-control">
        </div>

        <div class="form-group">
          <label>Category:</label>
          <select name="category" value="<%- api.category %>" id="api-category" class="form-control">
            // populates with pre-selected category
            <%
            var options = [ "Music", "Recommendations", "Transportation", "Fitness", "Social", "Photos", "Shopping", "Real Estate", "Mapping", "Weather", "Video" ];
            for ( var i = 0; i < options.length; i++ )
            {
              var selected = ( api.category == options[i] ) ? "selected" : "";
              %><option value="<%=options[i] %>" <%=selected %>><%= options[i] %></option><%
            }
            %>
          </select>
        </div>

        <div class="rated-categories">
          <hr>
          <h4>Ratings</h4>
  <!-- forces users to choose from 1-5 but will not remember their previous input -->
          <div class="form-group">
            <label>Install:</label>
                  <select class="form-control" id="api-install" name="install" value="<%- api.install %>">
                    // populates with pre-selected install
                    <%
                    var options = [ 1, 2, 3, 4, 5 ];
                    for ( var i = 0; i < options.length; i++ )
                    {
                      var selected = ( api.install == options[i] ) ? "selected" : "";
                      %><option value="<%=options[i] %>" <%=selected %>><%= options[i] %></option><%
                    }
                    %>
                  </select>
                </div>
              <select class="form-control" id="api-readability" name="readability" value="<%- api.readability %>">
                // populates with pre-selected readability
                <%
                var options = [ 1, 2, 3, 4, 5 ];
                for ( var i = 0; i < options.length; i++ )
                {
                  var selected = ( api.readability == options[i] ) ? "selected" : "";
                  %><option value="<%=options[i] %>" <%=selected %>><%= options[i] %></option><%
                }
                %>
              </select>
            </div>
              <select class="form-control" id="api-technicality" name="technicality" value="<%- api.technicality %>">
                // populates with pre-selected technicality
                <%
                var options = [ 1, 2, 3, 4, 5 ];
                for ( var i = 0; i < options.length; i++ )
                {
                  var selected = ( api.technicality == options[i] ) ? "selected" : "";
                  %><option value="<%=options[i] %>" <%=selected %>><%= options[i] %></option><%
                }
                %>
              </select>
            </div>

        <div class="form-group">
          <input type="submit" value='Update API'>
        </div>
        <a class="btn btn-primary"href="/<%- api._id%>">Back</a>

      </form>

      <%- include ../partials/footer.ejs %>
    </div>
    </body>
</html>
